<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wix Interact - Animation Library</title>
    
    <!-- Fonts: Inter & JetBrains Mono -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@200;300;400;500;600;900&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <!-- Helvetica for the new section -->
    <link href="https://fonts.cdnfonts.com/css/helvetica-neue-55" rel="stylesheet">


    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                fontFamily: {
                    sans: ['Inter', 'system-ui', 'sans-serif'],
                    mono: ['JetBrains Mono', 'monospace'],
                    helvetica: ['Helvetica Neue', 'Helvetica', 'Arial', 'sans-serif'],
                },
                extend: {
                    colors: {
                        'off-black': '#111111',
                        'apple-gray': '#86868b',
                    },
                    fontSize: {
                        'giant': ['6rem', { lineHeight: '1' }],
                        // Updated to match new design
                        'mega': ['11rem', { lineHeight: '0.9' }],
                    },
                    letterSpacing: {
                        'tighter': '-0.04em',
                    }
                }
            }
        }
    </script>

    <style>
        /* Essential Overrides */
        body {
            overflow-x: hidden;
            background-color: #111111; /* Dark background matches hero */
            color: #ffffff;
            -webkit-font-smoothing: antialiased;
        }

        interact-element {
            display: block;
        }

        /* HERO GRID STYLES */
        .hero-grid-container {
            display: grid;
            /* Dense grid of small lines */
            grid-template-columns: repeat(auto-fill, minmax(40px, 1fr));
            grid-template-rows: repeat(auto-fill, minmax(40px, 1fr));
            width: 100%;
            height: 100%;
            /* Masking the edges slightly */
            mask-image: linear-gradient(to bottom, black 80%, transparent 100%);
            -webkit-mask-image: linear-gradient(to bottom, black 80%, transparent 100%);
        }

        .grid-cell {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 100%;
            height: 100%;
        }

        .grid-line {
            width: 2px;
            height: 12px; /* The "stick" length */
            /* KEEP: Gradient from off-black to white for Hero Grid */
            background: linear-gradient(to bottom, #111111 0%, #FFFFFF 100%);
            transform-origin: center;
            will-change: transform;
        }

        /* CRITICAL ANIMATION STYLES (Preserved for other sections) */
        .sticky-wrapper {
            position: sticky;
            top: 0;
            height: 100vh;
            overflow: clip; /* Required for ViewTimeline */
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* Card Spread Styles */
        .spread-card {
            position: absolute;
            top: 50%;
            left: 50%;
            width: 350px;
            height: 500px;
            background-size: contain;
            background-repeat: no-repeat;
            background-position: center;
            will-change: transform;
            filter: drop-shadow(0 25px 25px rgba(0,0,0,0.15));
        }

        .spread-card-init {
            transform: translate(-50%, -50%);
        }

        /* TUNNEL EFFECT STYLES */
        .tunnel-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        /* Updated Tunnel Circle Styles */
        .tunnel-circle {
            display: flex;
            justify-content: center;
            align-items: center;
            
            border-radius: 50%;
            /* The border color is now set dynamically in JS for the depth/gradient effect */
            border: 1px solid rgba(255, 255, 255, 1); 
            will-change: transform; 
            
            opacity: 0.60;

            flex-shrink: 0;
            max-width: none;
            max-height: none;

            width: 93%;
            height: 93%;
            
            /* Enhanced 3D shadow effect */
            box-shadow: 
                inset 3px 3px 6px rgba(255, 255, 255, 0.3), 
                inset -3px -3px 6px rgba(0, 0, 0, 0.8);
        }
        
        /* Updated constraints for the tunnel circles inside the new container */
        .tunnel-container > .tunnel-circle {

             width: 50vmax;
             height: 50vmax;
            margin: auto;
        }

        /* Horizontal Scroll Styles */
        .horizontal-track {
            display: flex;
            gap: 8rem;
            align-items: flex-end;
            padding-left: calc(50vw - 300px);
            padding-right: 50vw;
            will-change: transform;
            width: max-content;
        }

        .h-card {
            width: 600px;
            height: 400px;
            flex-shrink: 0;
            background-size: cover;
            background-position: center;
            border-radius: 4px;
            transform-origin: center center;
            will-change: transform;
            /* Added for hover content */
            position: relative;
            overflow: hidden; 
            border: 1px solid rgba(255, 255, 255, 0.8);

        }

        /* NEW COMPONENT STYLES */
        .custom-scrollbar::-webkit-scrollbar {
            width: 3px;
            height: 3px;
        }
        .custom-scrollbar::-webkit-scrollbar-track {
            background: transparent;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
            background: #BDE1FF;
            border-radius: 3px;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb:hover {
            background: #BDE1FF;
        }

        /* Existing Circle Style for Primitives */
        .circle {
            width: 16rem;  /* w-64 */
            height: 16rem; /* h-64 */
            background-color: transparent;
            border: 1px solid white; /* Ensures white outline on white bg too? No, needs contrast */
            border-radius: 50%;
            position: relative;
            overflow: hidden;
            will-change: transform;
        }
        
        .fill-circle {
            width: 100%;
            height: 100%;
            /* Reverted back to solid white */
            background-color: white;
            border-radius: 50%;
            transform: scale(0);
            will-change: transform;
        }

        /* Utility */
        .card-shadow {
            box-shadow: 0 20px 40px -10px rgba(0, 0, 0, 0.15);
        }
        
        .hover-target {
            box-shadow: inset 0 0 0 160px #f3f4f6;
        }

        /* Initial states for ripples: hidden and slightly smaller */
        .ripple-init {
            opacity: 0;
            transform: scale(0.8);
        }

        /* --- MOUSE TRACK TUNNEL STYLES --- */
        .preserve-3d {
            transform-style: preserve-3d;
        }

        .ring-base {
            display: flex;
            justify-content: center;
            align-items: center;
            border-radius: 50%;
            border: 1px solid rgba(255, 255, 255, 0.8);
            pointer-events: none;
            position: absolute; 
        }

        .tunnel-static {
            width: 14rem; /* Scaled to fit card */
            height: 14rem;
            border-width: 2px;
            border-color: rgba(255, 255, 255, 0.4);
            z-index: 10;
        }

        .tunnel-moving {
            width: 85%;
            height: 85%;
            position: relative; 
            display: flex;
            justify-content: center;
            align-items: center;
        }

        /* --- PYRAMID STYLES (NEW) --- */
        .pyramid-wrapper {
            position: relative;
            width: 400px;
            height: 400px;
            transform-style: preserve-3d;
            z-index: 20;
            transform: scale(0.76); 
            transform-origin: center;
        }
        @media (max-width: 640px) {
            .pyramid-wrapper {
                transform: scale(1.265);
            }
        }

        /* Target Element for Rotation */
        .pyramid-rotator {
            width: 100%;
            height: 100%;
            position: relative;
            transform-style: preserve-3d;
            transform-origin: 50% 57%;
            /* Starts at 0, driven by scroll */
            transform: rotateX(0deg) rotateY(0deg); 
        }

        .face {
            position: absolute;
            width: 400px;
            height: 400px;
            box-sizing: border-box;
            pointer-events: none;
            display: flex;
            justify-content: center;
            align-items: flex-end;
            backface-visibility: visible; 
            transform-origin: bottom center; 
        }

        .face svg {
            width: 100%;
            height: 100%;
            overflow: visible;
        }
        
        .face polygon, .face rect {
            vector-effect: non-scaling-stroke;
            stroke: #FFFFFF;
            stroke-width: 1.5;
        }

        /* Geometry */
        .face.front { transform: translateZ(200px) rotateX(30deg); }
        .face.back  { transform: rotateY(180deg) translateZ(200px) rotateX(30deg); }
        .face.right { transform: rotateY(90deg) translateZ(200px) rotateX(30deg); }
        .face.left  { transform: rotateY(-90deg) translateZ(200px) rotateX(30deg); }
        .face.base  { 
            transform-origin: center center; 
            transform: rotateX(90deg) translateZ(-200px);
            align-items: center;
        }

        /* --- TEXT/CONTENT STYLES (NEW) --- */
        .content-layer {
            position: absolute; 
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 10;
            text-align: center;
            mix-blend-mode: normal;
            width: 100%;
        }

        .scene-container {
            flex-direction: column; 
            perspective: 500px; 
            gap: 2rem;
        }

        /* Modal Styles */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(12px);
            z-index: 100;
            display: none;
            justify-content: center;
            align-items: center;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .modal-overlay.active {
            display: flex;
            opacity: 1;
        }

        .modal-content {
            background: white;
            border: 1px solid #eee;
            width: 90%;
            max-width: 800px;
            max-height: 80vh;
            overflow-y: auto;
            position: relative;
            box-shadow: 0 30px 60px rgba(0, 0, 0, 0.1);
            border-radius: 16px;
        }

        .code-block {
            background: #f9f9f9;
            padding: 1.5rem;
            font-family: 'Menlo', 'Monaco', monospace;
            font-size: 0.8rem;
            line-height: 1.5;
            color: #333;
            overflow-x: auto;
            border-left: 2px solid #111;
            white-space: pre;
        }
         /* --- MENGER SPONGE STYLES --- */
        .scene-container-2 {
            perspective: 1200px;
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            transform-style: preserve-3d;
            /* Removed overflow: hidden to allow the sponge to explode outside its box */
        }

        /* Sponge interaction wrapper */
        .interact-sponge-wrapper {
            width: 320px;
            height: 320px;
            transform-style: preserve-3d;
            position: relative;
            cursor: pointer;
            z-index: 10;
        }

        .sponge-root {
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            transform-style: preserve-3d;
            will-change: transform;
        }

        .voxel {
            position: absolute;
            top: 0;
            left: 0;
            width: 60px;
            height: 60px;
            transform-style: preserve-3d;
            will-change: transform;
            margin-left: -30px;
            margin-top: -30px;
            pointer-events: none;

            /* CSS Var --spacing is animated by Interact via WAAPI */
            transform: translate3d(
                calc(var(--x) * (60px + var(--spacing))),
                calc(var(--y) * (60px + var(--spacing))),
                calc(var(--z) * (60px + var(--spacing)))
            );
        }

        .cube-face {
            position: absolute;
            box-sizing: border-box;
            width: 60px;
            height: 60px;
            /* Fills are now 70% opacity */
            background-color: rgba(23, 23, 23, 0.7);
            border: 1px solid rgba(255, 255, 255, 0.9);
            backface-visibility: hidden;
            transform-origin: center center;
            pointer-events: none;
        }
        
        ::-webkit-scrollbar { width: 0px; }
    </style>
</head>

<body class="bg-off-black text-white selection:bg-blue-300 selection:text-off-black">

    <!-- Navigation -->
    <nav class="fixed top-0 w-full z-50 px-6 py-6 md:px-12 flex justify-between items-center mix-blend-difference text-white pointer-events-none">
        <interact-element data-interact-key="nav-logo" class="pointer-events-auto">
            <div class="text-sm font-medium tracking-wide uppercase">● Interact </div>
        </interact-element>
        <interact-element data-interact-key="nav-cta" class="pointer-events-auto">
            <a href="https://github.com/wix-incubator/interact" target="_blank" class="text-sm font-medium border border-transparent px-6 py-2 rounded-full bg-white text-off-black hover:bg-gray-200 transition-colors duration-300">
               Go to Repository ↗
            </a>
        </interact-element>
    </nav>

    <main>
    <!-- HERO SECTION -->
    <interact-element data-interact-key="hero-section">
        <header class="relative min-h-screen flex flex-col justify-center px-6 md:px-12 lg:px-24 pt-20 overflow-hidden bg-off-black">
            
            <!-- INTERACTIVE GRID BACKGROUND -->
            <interact-element data-interact-key="hero-grid" class="absolute inset-0 w-full h-full pointer-events-none z-0">
                <div id="grid-container" class="hero-grid-container">
                    <!-- Javascript will populate this -->
                </div>
            </interact-element>

            <!-- HERO CONTENT -->
            <div class="max-w-[90vw] perspective-[1000px] relative z-20">
                <interact-element data-interact-key="hero-title" class="perspective-[2500px]">
                    <div class="inline-block">

                        
                        <interact-element data-interact-key="hero-line-1">
                            <h1 class="text-2xl md:text-3xl lg:text-6xl font-light tracking-tighter text-white mb-2 leading-[0.85]">
                                  Interact
                            </h1>
                        </interact-element>
                        
                        <interact-element data-interact-key="hero-line-2">
                            <h1 class="text-6xl md:text-8xl lg:text-mega font-light tracking-tighter text-white leading-[0.85]"> Powers the web with motion.
                            </h1>
                        </interact-element>
                    </div>
                </interact-element>
            </div>

            <div class="mt-16 md:mt-24 max-w-2xl ml-auto mr-0 md:mr-12 relative z-20">
                <interact-element data-interact-key="hero-subtitle">
                    <div class="opacity-100 p-4 md:p-0">
                        <p class="text-xl md:text-3xl font-light text-gray-400 leading-tight tracking-tight mb-8">
Create high-performance, beautiful web animations with Interact — from simple micro-interactions to complex, scroll-driven storytelling. Designed for designers and developers alike, with a robust, production-ready API
                        </p>
                        
                        <div class="flex gap-4">
                            <a href="https://github.com/wix-incubator/interact" target="_blank" rel="noopener noreferrer" class="px-8 py-4 rounded-full bg-white text-off-black font-medium text-sm hover:bg-gray-200 transition-colors flex items-center gap-2">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z" /></svg>
                                Github
                            </a>
<a href="https://www.npmjs.com/package/@wix/interact" target="_blank" rel="noopener noreferrer" class="px-8 py-4 rounded-full border border-white/20 text-white font-medium text-sm hover:bg-white/10 transition-colors flex items-center gap-2">                                <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M1.763 0c-.966 0-1.75.79-1.75 1.764v20.472c0 .974.784 1.764 1.75 1.764h20.474c.966 0 1.75-.79 1.75-1.764v-20.472c0-.974-.784-1.764-1.75-1.764h-20.474zm12.516 5.5h2.972v13h-2.972v-13zm-9.972 0h2.971v13h-2.971v-13zm5.003 0h2.972v13h-2.972v-13z" /></svg>
                                NPM
                            </a>
                        </div>
                    </div>
                </interact-element>
            </div>
        </header>
    </interact-element>

    <!-- PERFORMANCE SECTION (UPDATED) -->
    <interact-element data-interact-key="performance-section">
        <!-- Decreased height to 100vh -->
        <section class="relative h-[100vh] bg-off-black overflow-hidden text-white">
            <div class="sticky-wrapper">
                
                <!-- NEW LAYOUT CONTAINER (for 2 columns) -->
                <div class="relative z-20 w-full h-full flex flex-col lg:flex-row items-center justify-center lg:justify-between lg:max-w-7xl lg:mx-auto p-6 md:p-12">
                    
                    <!-- COLUMN 1: TEXT -->
                    <div class="w-full lg:w-1/2 lg:text-left text-center lg:pr-12 pointer-events-none mb-12 lg:mb-0">
                        <interact-element data-interact-key="perf-text">
                            <h3 class="text-6xl md:text-8xl lg:text-giant font-light tracking-tighter text-white leading-[0.85] lg:text-left">
                                Unleash high performance web motion
                            </h3>
                            <p><br></p>
                            <p class="text-xl md:text-3xl font-light text-gray-400 leading-tight tracking-tight mb-8 lg:text-left">
Interact runs closer to the browser, delivering smooth, GPU-accelerated animations with minimal overhead. Build complex interactions without compromising site speed — from subtle micro-interactions to full-page storytelling.
                            </p>
                        </interact-element>
                    </div>

                    <!-- COLUMN 2: TUNNEL VISUALIZATION CONTAINER -->
                    <div id="tunnel-scene-container" class="w-full lg:w-1/2 h-[400px] lg:h-full max-h-[600px] flex items-center justify-center relative z-0 rounded-xl"> 
                        <interact-element data-interact-key="tunnel-root" class="w-full h-full relative">
                            <!-- The tunnel-container is now constrained to this w-1/2 element -->
                            <div class="tunnel-container" id="tunnel-container">
                                <!-- Filled by JS -->
                            </div>
                        </interact-element>
                    </div>

                </div>
            </div>
        </section>
    </interact-element>
<!-- PERFORMANCE SECTION -->
        <interact-element data-interact-key="performance-section">
            <section class="relative h-[100vh] bg-off-black overflow-hidden text-white">
                <div class="sticky-wrapper">
                   
                    <!-- LAYOUT CONTAINER -->
                    <!-- Kept lg:flex-row-reverse from previous edit -->
                    <div class="relative z-20 w-full h-full flex flex-col lg:flex-row-reverse items-center justify-center lg:justify-between lg:max-w-7xl lg:mx-auto p-6 md:p-12">
                       
                        <!-- COLUMN 1: TEXT -->
                        <!-- Kept lg:pl-12 from previous edit -->
                        <div class="w-full lg:w-1/2 lg:text-left text-center lg:pl-12 pointer-events-none mb-12 lg:mb-0">
                            <interact-element data-interact-key="perf-text-2">
                                <h3 class="text-6xl md:text-8xl lg:text-giant font-light tracking-tighter text-white leading-[0.85] lg:text-left">
                                    Motion That Fits Every Screen
                                </h3>
                                <p><br></p>
                                <p class="text-xl md:text-3xl font-light text-gray-400 leading-tight tracking-tight mb-8 lg:text-left">
    Interact enables precise control over responsive animations across screen sizes. Using media queries, you can define how effects behave at different breakpoints, ensuring motion is optimized for every layout.
                                </p>
                            </interact-element>
                        </div>

                        <!-- COLUMN 2: MENGER SPONGE GRAPHIC -->
                        <!-- Removed max-h-[600px] to unconfine the vertical space -->
                        <div id="graphic-container" class="w-full lg:w-1/2 h-[400px] lg:h-full flex items-center justify-center relative z-0 rounded-xl">
                           
                            <!-- 3D Scene -->
                            <div class="scene-container-2">
                                <interact-element data-interact-key="hitbox" class="interact-sponge-wrapper">
                                    <interact-element data-interact-key="sponge" style="display: block; width: 100%; height: 100%;">
                                        <div id="sponge" class="sponge-root">
                                            <!-- Voxels injected here -->
                                        </div>
                                    </interact-element>
                                </interact-element>

                                <!-- Label removed as requested -->
                            </div>

                        </div>

                    </div>
                </div>
            </section>
        </interact-element>
    <!-- BEAUTIFUL EFFECTS (NEW SCROLL-SCRUBBED LAYOUT) -->
    <interact-element data-interact-key="beautiful-section">
        <!-- Height set to 300vh for long scrub -->
        <section class="relative h-[300vh] bg-off-black text-white" id="beautiful-scroll-track">
            <div class="sticky-wrapper scene-container" style="perspective: 500px; flex-direction: column;">
                
                <!-- 1. PYRAMID (Visual Element) -->
                <div class="pyramid-wrapper absolute" style="position: absolute; transform: scale(0.76);" >
                    <interact-element data-interact-key="pyramid-target" class="w-full h-full">
                        <div class="pyramid-rotator">
                            <div class="face front">
                                <svg viewBox="0 0 100 100">
                                    <polygon points="50,0 100,100 0,100" fill="rgba(0,0,0,0.3)" stroke="white" stroke-width="1.5"/>
                                </svg>
                            </div>
                            <div class="face right">
                                <svg viewBox="0 0 100 100">
                                    <polygon points="50,0 100,100 0,100" fill="rgba(0,0,0,0.3)" stroke="white" stroke-width="1.5"/>
                                </svg>
                            </div>
                            <div class="face back">
                                <svg viewBox="0 0 100 100">
                                    <polygon points="50,0 100,100 0,100" fill="rgba(0,0,0,0.3)" stroke="white" stroke-width="1.5"/>
                                </svg>
                            </div>
                            <div class="face left">
                                <svg viewBox="0 0 100 100">
                                    <polygon points="50,0 100,100 0,100" fill="rgba(0,0,0,0.3)" stroke="white" stroke-width="1.5"/>
                                </svg>
                            </div>
                            <div class="face base">
                                <svg viewBox="0 0 100 100">
                                    <rect x="0" y="0" width="100" height="100" fill="rgba(0,0,0,0.3)" stroke="white" stroke-width="1.5"/>
                                </svg>
                            </div>
                        </div>
                    </interact-element>
                </div>

                <!-- 2. TEXT (Content Layer) -->
                <div class="content-layer px-6 md:px-12 max-w-7xl mx-auto">
                    <!-- Text Container -->
                    <div class="mt-0">
                        <!-- Using Mega size defined in tailwind -->
                        <h3 class="text-6xl md:text-mega font-light tracking-tighter text-white leading-tight mb-8 drop-shadow-[0_0_15px_rgba(0,0,0,0.8)] whitespace-nowrap">
                            <interact-element data-interact-key="word-1" class="inline-block"><span>Beautiful</span></interact-element>
                            <interact-element data-interact-key="word-2" class="inline-block"><span>Effects,</span></interact-element><br>
                            <interact-element data-interact-key="word-3" class="inline-block"><span>Ready</span></interact-element>
                            <interact-element data-interact-key="word-4" class="inline-block"><span>to</span></interact-element>
                            <interact-element data-interact-key="word-5" class="inline-block"><span>Use.</span></interact-element>
                        </h3>
                        <!-- Description -->
                        <interact-element data-interact-key="desc-text" class="block">
                            <p class="text-2xl md:text-4xl font-light text-gray-400 leading-tight tracking-tight mb-8 max-w-4xl mx-auto drop-shadow-lg">
Interact comes with a rich and diverse set of named effects, each designed to bring your website to life. Apply them instantly to text, images, cards, buttons, and entire sections, and create smooth, expressive animations that engage users and elevate every interaction.
                            </p>
                        </interact-element>
                    </div>
                    <div class="flex flex-col items-center gap-4 transform translate-y-12">
                        <h2 class="text-sm font-medium tracking-widest uppercase text-white">
                            Watch it move
                        </h2>
                        <!-- Arrow Down -->
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M12 5v14M19 12l-7 7-7-7"/>
                        </svg>
                    </div>
                </div>
            </div>
        </section>
    </interact-element>

    <!-- CARD SPREAD -->
    <interact-element data-interact-key="spread-section">
        <section class="relative h-[300vh] bg-white text-off-black" id="spread-section">

            <div class="sticky-wrapper">
                
                <div class="relative w-full h-full flex items-center justify-center perspective-[1000px]">
                    <interact-element data-interact-key="spread-card-0">
                        <div class="spread-card spread-card-init" style="background-image: url('https://static.wixstatic.com/media/9eca39_e6637e07dfcb4e53b7678a9cef40aa7a~mv2.png'); z-index: 5;"></div>
                    </interact-element>
                    <interact-element data-interact-key="spread-card-1">
                        <div class="spread-card spread-card-init" style="background-image: url('https://static.wixstatic.com/media/9eca39_2946702578bc4f3196e15f2ea4f93f0b~mv2.png'); z-index: 4;"></div>
                    </interact-element>
                    <interact-element data-interact-key="spread-card-2">
                        <div class="spread-card spread-card-init" style="background-image: url('https://static.wixstatic.com/media/9eca39_e42d5b5ebaf942f1979ced8700e0d499~mv2.png'); z-index: 3;"></div>
                    </interact-element>
                    <interact-element data-interact-key="spread-card-3">
                        <div class="spread-card spread-card-init" style="background-image: url('https://static.wixstatic.com/media/9eca39_00ea4d8b1bfc418486b742e3bcdf0e53~mv2.png'); z-index: 2;"></div>
                    </interact-element>
                    <interact-element data-interact-key="spread-card-4">
                        <div class="spread-card spread-card-init" style="background-image: url('https://static.wixstatic.com/media/9eca39_2ffdb3397a52442a928502e6f447dfc1~mv2.png'); z-index: 1;"></div>
                    </interact-element>
                </div>

                <div class="absolute bottom-12 left-1/2 -translate-x-1/2 text-center z-50">
                    <button class="px-6 py-3 rounded-full bg-white text-black shadow-lg text-sm font-medium hover:scale-105 transition-transform" onclick="openModal('spread')">View Source Code</button>
                </div>
            </div>
        </section>
    </interact-element>

    <!-- INTERACTION GRID -->
    <section class="bg-white py-32 px-6 md:px-12 lg:px-24 text-off-black relative">
        <h2 class="text-6xl md:text-6xl lg:text-6xl font-light tracking-tighter text-off-black text-center leading-[1.85]"">Trigger Your Motion</h2>
        <p><br></p>
          <p class="text-xl md:text-3xl font-light text-gray-600 leading-tight tracking-tight text-center mb-8 min-w-xl max-w-2xl mx-auto ">Animate elements based on user interactions -  from micro-motion touches to large-scale expressive interactions.</p>
        <div class="flex flex-col gap-40 items-center w-full">
            
            <!-- 1. HOVER -->
            <div class="w-full h-auto lg:h-[500px] overflow-hidden flex flex-col lg:flex-row rounded-3xl">
                <div class="w-full lg:w-5/12 h-[400px] lg:h-full flex items-center justify-center p-6 lg:p-8 bg-white">
                    <div class="h-full aspect-square bg-[#000] relative overflow-hidden rounded-2xl">
                        <interact-element data-interact-key="hover-circle-1" class="absolute -bottom-24 -left-24">
                            <div class="circle cursor-pointer"><div class="fill-circle"></div></div>
                        </interact-element>
                        <interact-element data-interact-key="hover-circle-2" class="absolute top-[calc(50%-8rem)] left-[calc(50%-8rem)]">
                            <div class="circle cursor-pointer"><div class="fill-circle"></div></div>
                        </interact-element>
                        <interact-element data-interact-key="hover-circle-3" class="absolute -top-24 -right-24">
                            <div class="circle cursor-pointer"><div class="fill-circle"></div></div>
                        </interact-element>
                    </div>
                </div>
                <div class="w-full lg:w-7/12 flex flex-col p-6 lg:p-10 h-auto lg:h-full">
                    <div class="mb-5 shrink-0">
                        <h1 class="text-xl md:text-3xl font-light text-gray-600 leading-tight tracking-tight ">Hover</h1>
                        <p class="text-base text-gray-500 font-light leading-relaxed">Add playful hover interactions to buttons, images, or UI elements.</p>
                    </div>
                    <div class="flex flex-col bg-gray-50 overflow-hidden lg:flex-grow lg:min-h-0 h-80 lg:h-auto rounded-2xl relative group">
                        <button class="copy-btn absolute top-4 right-4 z-10 flex items-center gap-2 text-xs font-bold text-gray-400 hover:text-blue-600 transition-colors bg-white/90 backdrop-blur-sm p-2 rounded-lg border border-gray-200 shadow-sm opacity-0 group-hover:opacity-100 group-focus-within:opacity-100 focus:opacity-100 transition-opacity duration-200">
                            <span class="copy-text">COPY</span>
                            <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="group-hover:stroke-blue-600"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
                        </button>
                        <div class="flex-grow overflow-auto p-5 custom-scrollbar bg-gray-50" tabindex="0">
                            <code class="codeDisplay block text-gray-700 text-xs font-mono leading-relaxed whitespace-pre" data-snippet="hover"></code>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 2. CLICK -->
            <div class="w-full h-auto lg:h-[500px] overflow-hidden flex flex-col lg:flex-row rounded-3xl">
                <div class="w-full lg:w-5/12 h-[400px] lg:h-full flex items-center justify-center p-6 lg:p-8 bg-white">
                    <div class="h-full aspect-square bg-[#000] relative overflow-hidden rounded-2xl">
                        
                        <!-- Ripple 2 (Outer - Back) -->
                        <interact-element data-interact-key="click-ripple-2" class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-10 pointer-events-none">
                            <div class="circle ripple-init"></div>
                        </interact-element>

                        <!-- Ripple 1 (Middle) -->
                        <interact-element data-interact-key="click-ripple-1" class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-20 pointer-events-none">
                            <div class="circle ripple-init"></div>
                        </interact-element>

                        <!-- Center Circle (Trigger - Front) -->
                        <interact-element data-interact-key="click-center" class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-30 cursor-pointer">
                            <div class="circle">
                                <div class="fill-circle"></div>
                            </div>
                        </interact-element>

                    </div>
                </div>
                <div class="w-full lg:w-7/12 flex flex-col p-6 lg:p-10 h-auto lg:h-full">
                    <div class="mb-5 shrink-0">
                        <h1 class="text-xl md:text-3xl font-light text-gray-600 leading-tight tracking-tight">Click</h1>
                        <p class="text-base text-gray-500 font-light leading-relaxed">Trigger motion on user clicks for buttons, dialogs, or interactive components.
</p>
                    </div>
                    <div class="flex flex-col bg-gray-50 overflow-hidden lg:flex-grow lg:min-h-0 h-80 lg:h-auto rounded-2xl relative group">
                        <button class="copy-btn absolute top-4 right-4 z-10 flex items-center gap-2 text-xs font-bold text-gray-400 hover:text-blue-600 transition-colors bg-white/90 backdrop-blur-sm p-2 rounded-lg border border-gray-200 shadow-sm opacity-0 group-hover:opacity-100 group-focus-within:opacity-100 focus:opacity-100 transition-opacity duration-200">
                            <span class="copy-text">COPY</span>
                            <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="group-hover:stroke-blue-600"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
                        </button>
                        <div class="flex-grow overflow-auto p-5 custom-scrollbar bg-gray-50" tabindex="0">
                            <!-- Added whitespace-pre class to preserve formatting -->
                            <code class="codeDisplay block text-gray-700 text-xs font-mono leading-relaxed whitespace-pre" data-snippet="click"></code>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 3. ENTRANCE -->
            <div class="w-full h-auto lg:h-[500px] overflow-hidden flex flex-col lg:flex-row rounded-3xl">
                <div class="w-full lg:w-5/12 h-[400px] lg:h-full flex items-center justify-center p-6 lg:p-8 bg-white">
                    <div class="h-full aspect-square bg-[#000] relative overflow-hidden rounded-2xl">
                        
                        <!-- Top Circle -->
                        <interact-element data-interact-key="circle-top" class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-10">
                            <div class="circle"><div class="fill-circle bg-transparent"></div></div>
                        </interact-element>

                        <!-- Right Circle -->
                        <interact-element data-interact-key="circle-right" class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-20">
                            <div class="circle"><div class="fill-circle bg-transparent"></div></div>
                        </interact-element>

                        <!-- Bottom Circle -->
                        <interact-element data-interact-key="circle-bottom" class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-30">
                            <div class="circle"><div class="fill-circle bg-transparent"></div></div>
                        </interact-element>

                          <!-- Left Circle -->
                          <interact-element data-interact-key="circle-left" class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-40">
                            <div class="circle"><div class="fill-circle bg-transparent"></div></div>
                        </interact-element>

                    </div>
                </div>
                <div class="w-full lg:w-7/12 flex flex-col p-6 lg:p-10 h-auto lg:h-full">
                    <div class="mb-5 shrink-0">
                        <h1 class="text-xl md:text-3xl font-light text-gray-600 leading-tight tracking-tight">View Enter (AKA Scroll Triggered Animations and Entrance Animations)</h1>
                        <p class="text-base text-gray-500 font-light leading-relaxed">Animate elements as they enter the viewport, or pause infinite animations as they exit — perfect for cards, sections, or hero elements.</p>
                    </div>
                    <div class="flex flex-col bg-gray-50 overflow-hidden lg:flex-grow lg:min-h-0 h-80 lg:h-auto rounded-2xl relative group">
                        <button class="copy-btn absolute top-4 right-4 z-10 flex items-center gap-2 text-xs font-bold text-gray-400 hover:text-blue-600 transition-colors bg-white/90 backdrop-blur-sm p-2 rounded-lg border border-gray-200 shadow-sm opacity-0 group-hover:opacity-100 group-focus-within:opacity-100 focus:opacity-100 transition-opacity duration-200">
                            <span class="copy-text">COPY</span>
                            <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="group-hover:stroke-blue-600"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
                        </button>
                        <div class="flex-grow overflow-auto p-5 custom-scrollbar bg-gray-50" tabindex="0">
                            <!-- Added whitespace-pre class to preserve formatting -->
                            <code class="codeDisplay block text-gray-700 text-xs font-mono leading-relaxed whitespace-pre" data-snippet="entrance"></code>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 5. MOUSE TRACK -->
            <div class="w-full h-auto lg:h-[500px] overflow-hidden flex flex-col lg:flex-row rounded-3xl">
                <div id="mouseTrack_hit" class="w-full lg:w-5/12 h-[400px] lg:h-full flex items-center justify-center p-6 lg:p-8 bg-white">
                    <div class="h-full aspect-square  relative rounded-2xl perspective-[1200px]"> <!-- Added perspective here -->
                        
                        <!-- SCENE ROOT -->
                        <interact-element data-interact-key="mt-scene-root" class="w-full h-full block">
                            
                            <!-- CARD TARGET (Tilts) -->
                            <interact-element data-interact-key="mt-card-target" class="w-full h-full block">
                                <div class="w-full h-full bg-[#000] rounded-2xl overflow-hidden relative flex items-center justify-center preserve-3d">
                                    
                                    <!-- CONTENT TARGET (Deep Tilt) -->
                                    <interact-element data-interact-key="mt-content-target" class="w-full h-full flex items-center justify-center block">
                                        <div id="mt-tunnel-mount" class="w-full h-full flex items-center justify-center preserve-3d">
                                            <!-- JS Injects Rings Here -->
                                        </div>
                                    </interact-element>

                                </div>
                            </interact-element>

                        </interact-element>

                    </div>
                </div>
                <div class="w-full lg:w-7/12 flex flex-col p-6 lg:p-10 h-auto lg:h-full">
                    <div class="mb-5 shrink-0">
                        <h1 class="text-xl md:text-3xl font-light text-gray-600 leading-tight tracking-tight">Pointer movement (AKA Trigger by Mouse)</h1>
                        <p class="text-base text-gray-500 font-light leading-relaxed">Move elements relative to cursor position for depth and engagement.</p>
                    </div>
                    <div class="flex flex-col bg-gray-50 overflow-hidden lg:flex-grow lg:min-h-0 h-80 lg:h-auto rounded-2xl relative group">
                        <button class="copy-btn absolute top-4 right-4 z-10 flex items-center gap-2 text-xs font-bold text-gray-400 hover:text-blue-600 transition-colors bg-white/90 backdrop-blur-sm p-2 rounded-lg border border-gray-200 shadow-sm opacity-0 group-hover:opacity-100 group-focus-within:opacity-100 focus:opacity-100 transition-opacity duration-200">
                            <span class="copy-text">COPY</span>
                            <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="group-hover:stroke-blue-600"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
                        </button>
                        <div class="flex-grow overflow-auto p-5 custom-scrollbar bg-gray-50" tabindex="0">
                            <!-- Added whitespace-pre class to preserve formatting -->
                            <code class="codeDisplay block text-gray-700 text-xs font-mono leading-relaxed whitespace-pre" data-snippet="mouseTrack"></code>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 7. SCROLLYTELLING (ATOM SPIN) -->
            <!-- Changed overflow-hidden to overflow-clip to fix ViewTimeline -->
            <div class="w-full h-auto lg:h-[500px] overflow-clip flex flex-col lg:flex-row rounded-3xl">
                <div class="w-full lg:w-5/12 h-[400px] lg:h-full flex items-center justify-center p-6 lg:p-8 bg-white">
                    <!-- Changed overflow-hidden to overflow-clip here as well -->
                    <div class="h-full aspect-square bg-[#000] relative overflow-clip rounded-2xl">
                        
                        <!-- Main wrapper for the scroll trigger -->
                        <interact-element data-interact-key="scrolly-atom-card" class="w-full h-full block">
                            <div class="w-full h-full flex items-center justify-center" style="perspective: 1000px;">
                                
                                <!-- 3D Scene -->
                                <div class="relative w-64 h-64" style="transform-style: preserve-3d;">
                                    
                                    <!-- Orbit 1: Vertical (Y-Axis) -->
                                    <interact-element data-interact-key="orbit-y" class="absolute inset-0 w-full h-full">
                                        <div class="w-full h-full rounded-full border-2 border-white/80"></div>
                                    </interact-element>

                                    <!-- Orbit 2: Horizontal (X-Axis) -->
                                    <interact-element data-interact-key="orbit-x" class="absolute inset-0 w-full h-full">
                                        <div class="w-full h-full rounded-full border-2 border-white/80"></div>
                                    </interact-element>

                                    <!-- Orbit 3: Diagonal 1 -->
                                    <interact-element data-interact-key="orbit-diag-1" class="absolute inset-0 w-full h-full">
                                        <div class="w-full h-full rounded-full border-2 border-white/80"></div>
                                    </interact-element>

                                    <!-- Orbit 4: Diagonal 2 -->
                                    <interact-element data-interact-key="orbit-diag-2" class="absolute inset-0 w-full h-full">
                                        <div class="w-full h-full rounded-full border-2 border-white/80"></div>
                                    </interact-element>

                                </div>

                                <!-- Hint Text -->
                                <div class="absolute bottom-6 w-full text-center text-white/60 text-xs tracking-widest uppercase font-mono pointer-events-none">
                                    Scroll to Spin
                                </div>

                            </div>
                        </interact-element>

                    </div>
                </div>
                <div class="w-full lg:w-7/12 flex flex-col p-6 lg:p-10 h-auto lg:h-full">
                    <div class="mb-5 shrink-0">
                        <h1 class="text-xl md:text-3xl font-light text-gray-600 leading-tight tracking-tight">Scroll</h1>
                        <p class="text-base text-gray-500 font-light leading-relaxed">Animate elements or sections based on scroll position to create immersive, narrative-driven experiences.</p>
                    </div>
                    <div class="flex flex-col bg-gray-50 overflow-clip lg:flex-grow lg:min-h-0 h-80 lg:h-auto rounded-2xl relative group">
                        <button class="copy-btn absolute top-4 right-4 z-10 flex items-center gap-2 text-xs font-bold text-gray-400 hover:text-blue-600 transition-colors bg-white/90 backdrop-blur-sm p-2 rounded-lg border border-gray-200 shadow-sm opacity-0 group-hover:opacity-100 group-focus-within:opacity-100 focus:opacity-100 transition-opacity duration-200">
                            <span class="copy-text">COPY</span>
                            <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="group-hover:stroke-blue-600"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
                        </button>
                        <div class="flex-grow overflow-auto p-5 custom-scrollbar bg-gray-50" tabindex="0">
                            <!-- Added whitespace-pre class to preserve formatting -->
                            <code class="codeDisplay block text-gray-700 text-xs font-mono leading-relaxed whitespace-pre" data-snippet="scrollytelling"></code>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Gradient Fade to Dark Section -->

        </div>
    </section>

    <!-- NEW SECTION: TAILORED EFFECTS -->
    <interact-element data-interact-key="tailored-section">
        <section class="py-32 px-6 md:px-12 lg:px-24 bg-off-black text-white relative z-10">
            <div class="max-w-7xl mx-auto">
                
                <!-- Title & Description -->
                <interact-element data-interact-key="tailored-header">
                    <div class="mb-24 text-center max-w-4xl mx-auto">
                        <h2 class="text-6xl md:text-6xl lg:text-6xl font-light tracking-tighter text-white text-center leading-[1.85]">Effects. Tailored to Your Vision</h2>
                        <p><br></p>
                        <p class="text-xl md:text-3xl font-light text-gray-400 leading-tight tracking-tight mb-8 text-center">
                            From a curated set of ready-to-use effects to fully custom motion, Interact gives you control to tailor animations precisely to your vision.
                        </p>
                    </div>
                </interact-element>

                <!-- 3 Columns -->
                <div class="grid grid-cols-1 md:grid-cols-3 gap-12 lg:gap-16 text-left">
                    
                    <!-- Column 1 -->
                    <interact-element data-interact-key="tailored-col-1">
                        <div>
                            <h3 class="text-xl md:text-3xl font-light text-white leading-tight tracking-tight text-center">Named Effects <span class="block text-gray-300 text-lg mt-1 font-normal">(Built-In Library)</span></h3>
                            <p class="text-gray-400 font-light leading-tight text-center">
                                A rich collection of ready-to-use effects that bring elements to life instantly. Perfect for rapid creation while ensuring polished, consistent motion.
                            </p>
                        </div>
                    </interact-element>

                    <!-- Column 2 -->
                    <interact-element data-interact-key="tailored-col-2">
                        <div>
                            <h3 class="text-xl md:text-3xl font-light text-white leading-tight tracking-tight text-center">Custom Keyframes</h3>
                            <p> <br> </p>
                            <p class="text-gray-400 font-light leading-tight text-center">
                                Gain control to design animations with precision. Write your own keyframes and animate any property exactly as needed.
                            </p>
                        </div>
                    </interact-element>

                    <!-- Column 3 -->
                    <interact-element data-interact-key="tailored-col-3">
                        <div>
                            <h3 class="text-xl md:text-3xl font-light text-white leading-tight tracking-tight text-center">Custom Effects <span class="block text-gray-300 text-lg mt-1 font-normal">(Full Extensibility)</span></h3>
                            <p class="text-gray-400 font-light leading-tight text-center">
                                Build reusable effects or integrate advanced motion systems — including physics-based animations, shaders, and WebGL.
                            </p>
                        </div>
                    </interact-element>

                </div>
            </div>
        </section>
    </interact-element>

    <!-- HORIZONTAL SCROLL SECTION (Moved to End) -->
    <interact-element data-interact-key="h-section">
        <section class="relative h-[400vh] bg-off-black text-white" id="horizontal-section">
            <div class="sticky-wrapper items-center">
                <div class="w-full h-full flex flex-col justify-center">
                    <div class="px-12 mb-[88px] text-center w-full relative z-10">
                        <h2 class="text-6xl md:text-6xl lg:text-6xl font-light tracking-tighter text-white text-center leading-[1.85]">Hey, Good Looking</h2>
                        <p><br></p>
                        <p class="text-xl md:text-3xl font-light text-gray-400 leading-tight tracking-tight text-center mb-8 min-w-xl max-w-2xl mx-auto">Get inspired by these motion-forward Wix websites created with Interact</p>
                    </div>

                    <interact-element data-interact-key="h-track">
                        <div class="horizontal-track" id="h-track">
                            <!-- Card 1 -->
                            <interact-element data-interact-key="h-card-1">
                                <div class="h-card group" style="background-image: url('https://static.wixstatic.com/media/9eca39_c371f3dae6cc46d9a89789a6f65f5a33~mv2.png')">
                                    <div class="absolute inset-0 bg-gradient-to-t from-black/80 via-black/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500"></div>
                                    <div class="absolute bottom-0 left-0 p-8 transform translate-y-4 opacity-0 group-hover:translate-y-0 group-hover:opacity-100 transition-all duration-500 ease-out w-full">
                                        <h3 class="text-2xl font-medium mb-1">Cosmic Scroll</h3>
                                        
                                        <a href="https://www.wix.com/website-template/view/html/3534" target="_blank" class="inline-block text-sm border-b border-white pb-0.5 hover:text-gray-300 hover:border-gray-300 transition-colors pointer-events-auto">Go to Website ↗</a>
                                    </div>
                                </div>
                            </interact-element>
                            <!-- Card 2 -->
                            <interact-element data-interact-key="h-card-2">
                                <div class="h-card group" style="background-image: url('https://static.wixstatic.com/media/9eca39_db75f5ca33fb48e3b3a734a30bfea317~mv2.png')">
                                    <div class="absolute inset-0 bg-gradient-to-t from-black/80 via-black/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500"></div>
                                    <div class="absolute bottom-0 left-0 p-8 transform translate-y-4 opacity-0 group-hover:translate-y-0 group-hover:opacity-100 transition-all duration-500 ease-out w-full">
                                        <h3 class="text-2xl font-medium mb-1">Animal Motion</h3>
                                 
                                        <a href="https://www.wix.com/website-template/view/html/3536" target="_blank" class="inline-block text-sm border-b border-white pb-0.5 hover:text-gray-300 hover:border-gray-300 transition-colors pointer-events-auto">Go to Website ↗</a>
                                    </div>
                                </div>
                            </interact-element>
                            <!-- Card 3 -->
                            <interact-element data-interact-key="h-card-3">
                                <div class="h-card group" style="background-image: url('https://static.wixstatic.com/media/9eca39_b823d93bb5004e4e8e666937e013002e~mv2.png')">
                                    <div class="absolute inset-0 bg-gradient-to-t from-black/80 via-black/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500"></div>
                                    <div class="absolute bottom-0 left-0 p-8 transform translate-y-4 opacity-0 group-hover:translate-y-0 group-hover:opacity-100 transition-all duration-500 ease-out w-full">
                                        <h3 class="text-2xl font-medium mb-1">Year in Review</h3>
                                       
                                        <a href="https://www.wix.com/website-template/view/html/3791" target="_blank" class="inline-block text-sm border-b border-white pb-0.5 hover:text-gray-300 hover:border-gray-300 transition-colors pointer-events-auto">Go to Website ↗</a>
                                    </div>
                                </div>
                            </interact-element>
                            <!-- Card 4 -->
                            <interact-element data-interact-key="h-card-4">
                                <div class="h-card group" style="background-image: url('https://static.wixstatic.com/media/9eca39_d0e0bc1ae2d04b3da60db5e5f70fbde6~mv2.png')">
                                    <div class="absolute inset-0 bg-gradient-to-t from-black/80 via-black/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500"></div>
                                    <div class="absolute bottom-0 left-0 p-8 transform translate-y-4 opacity-0 group-hover:translate-y-0 group-hover:opacity-100 transition-all duration-500 ease-out w-full">
                                        <h3 class="text-2xl font-medium mb-1">Starcast Project</h3>
                                        
                                        <a href="https://www.wix.com/website-template/view/html/3538" target="_blank" class="inline-block text-sm border-b border-white pb-0.5 hover:text-gray-300 hover:border-gray-300 transition-colors pointer-events-auto">Go to Website ↗</a>
                                    </div>
                                </div>
                            </interact-element>
                            <!-- Card 5 -->
                            <interact-element data-interact-key="h-card-5">
                                <div class="h-card group" style="background-image: url('https://static.wixstatic.com/media/9eca39_6626db560cf841ad86c7313766f95297~mv2.png')">
                                    <div class="absolute inset-0 bg-gradient-to-t from-black/80 via-black/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500"></div>
                                    <div class="absolute bottom-0 left-0 p-8 transform translate-y-4 opacity-0 group-hover:translate-y-0 group-hover:opacity-100 transition-all duration-500 ease-out w-full">
                                        <h3 class="text-2xl font-medium mb-1">Product Store</h3>
                                       
                                        <a href="https://www.wix.com/website-template/view/html/3517" target="_blank" class="inline-block text-sm border-b border-white pb-0.5 hover:text-gray-300 hover:border-gray-300 transition-colors pointer-events-auto">Go to Website ↗</a>
                                    </div>
                                </div>
                            </interact-element>
                            <!-- Card 6 -->
                            <interact-element data-interact-key="h-card-6">
                                <div class="h-card group" style="background-image: url('https://static.wixstatic.com/media/9eca39_c05aed6fa07b4947ae0439c714427a68~mv2.png')">
                                    <div class="absolute inset-0 bg-gradient-to-t from-black/80 via-black/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500"></div>
                                    <div class="absolute bottom-0 left-0 p-8 transform translate-y-4 opacity-0 group-hover:translate-y-0 group-hover:opacity-100 transition-all duration-500 ease-out w-full">
                                        <h3 class="text-2xl font-medium mb-1">Software Company</h3>
                                         
                                        <a href="https://www.wix.com/website-template/view/html/3608" target="_blank" class="inline-block text-sm border-b border-white pb-0.5 hover:text-gray-300 hover:border-gray-300 transition-colors pointer-events-auto">Go to Website ↗</a>
                                    </div>
                                </div>
                            </interact-element>
                            <!-- Card 7 (New) -->
                            <interact-element data-interact-key="h-card-7">
                                <div class="h-card group" style="background-image: url('https://static.wixstatic.com/media/9eca39_4e6846ae7912472b9241de416ef951a8~mv2.png')">
                                    <div class="absolute inset-0 bg-gradient-to-t from-black/80 via-black/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500"></div>
                                    <div class="absolute bottom-0 left-0 p-8 transform translate-y-4 opacity-0 group-hover:translate-y-0 group-hover:opacity-100 transition-all duration-500 ease-out w-full">
                                        <h3 class="text-2xl font-medium mb-1">Coming Soon Landing Page</h3>
                                     
                                        <a href="https://www.wix.com/website-template/view/html/3748" target="_blank" class="inline-block text-sm border-b border-white pb-0.5 hover:text-gray-300 hover:border-gray-300 transition-colors pointer-events-auto">Go to Website ↗</a>
                                    </div>
                                </div>
                            </interact-element>
                            <!-- Card 8 (New) -->
                            <interact-element data-interact-key="h-card-8">
                                <div class="h-card group" style="background-image: url('https://static.wixstatic.com/media/9eca39_e6a7e442d88243e2aec66c05374d8a2f~mv2.png')">
                                    <div class="absolute inset-0 bg-gradient-to-t from-black/80 via-black/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500"></div>
                                    <div class="absolute bottom-0 left-0 p-8 transform translate-y-4 opacity-0 group-hover:translate-y-0 group-hover:opacity-100 transition-all duration-500 ease-out w-full">
                                        <h3 class="text-2xl font-medium mb-1">Artist</h3>
                                         
                                        <a href="https://www.wix.com/website-template/view/html/3545" target="_blank" class="inline-block text-sm border-b border-white pb-0.5 hover:text-gray-300 hover:border-gray-300 transition-colors pointer-events-auto">Go to Website ↗</a>
                                    </div>
                                </div>
                            </interact-element>
                            <!-- Card 9 (New) -->
                            <interact-element data-interact-key="h-card-9">
                                <div class="h-card group" style="background-image: url('https://static.wixstatic.com/media/9eca39_7f4c2bc9aa9141e39bcc7a867506878b~mv2.png')">
                                    <div class="absolute inset-0 bg-gradient-to-t from-black/80 via-black/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500"></div>
                                    <div class="absolute bottom-0 left-0 p-8 transform translate-y-4 opacity-0 group-hover:translate-y-0 group-hover:opacity-100 transition-all duration-500 ease-out w-full">
                                        <h3 class="text-2xl font-medium mb-1">Electronics Store</h3>
                                       
                                        <a href="https://www.wix.com/website-template/view/html/3745" target="_blank" class="inline-block text-sm border-b border-white pb-0.5 hover:text-gray-300 hover:border-gray-300 transition-colors pointer-events-auto">Go to Website ↗</a>
                                    </div>
                                </div>
                            </interact-element>
                        </div>
                    </interact-element>
                </div>
            </div>
        </section>
    </interact-element>

    <!-- PINNED TAG (New Addition) -->
    <div class="fixed bottom-0 left-0 z-50 mix-blend-difference pointer-events-none hidden md:block">
        <interact-element data-interact-key="pinned-tag" class="pointer-events-auto">
            <div class="bg-white text-black py-6 px-2 rounded-l-lg font-regular text-[10px] tracking-widest uppercase shadow-lg transition-colors hover:bg-gray-200 cursor-default" style="writing-mode: vertical-rl; text-orientation: mixed; transform: rotate(180deg);">
                Made for Professionals by Professionals
            </div>
        </interact-element>
    </div>

    <!-- FOOTER -->
    <footer class="bg-off-black text-white py-12 px-6 md:px-12 border-t border-gray-800 flex justify-between items-end">
        <interact-element data-interact-key="footer-brand">
            <h2 class="text-lg font-medium uppercase">● Interact</h2>
            <p class="text-sm text-gray-400 mt-2">© 2025</p>
        </interact-element>
        
        <interact-element data-interact-key="footer-link">
             <div class="flex gap-6">
                <a href="https://www.npmjs.com/package/@wix/interact" target="_blank" class="text-lg font-light hover:text-gray-500 transition-colors">NPM</a>
                <a href="https://github.com/wix-incubator/interact" target="_blank" class="text-lg font-light hover:text-gray-500 transition-colors">Github</a>
             </div>
        </interact-element>
    </footer>
    </main>

    <!-- LIGHTBOX MODAL -->
    <div id="code-modal" class="modal-overlay">
        <div class="modal-content text-off-black">
            <div class="flex justify-between items-center p-6 border-b border-gray-100 sticky top-0 bg-white">
                <h3 class="font-bold text-lg">Source Code</h3>
                <button onclick="closeModal()" class="w-8 h-8 flex items-center justify-center hover:bg-gray-100 rounded-full transition-colors">
                    <svg width="14" height="14" viewBox="0 0 14 14" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M1 1l12 12M13 1L1 13" />
                    </svg>
                </button>
            </div>
            <div class="p-0">
                <pre id="modal-code" class="code-block !bg-white !p-8 !border-none text-sm"></pre>
            </div>
        </div>
    </div>

    <!-- MODAL LOGIC -->
    <script>
        const modal = document.getElementById('code-modal');
        const modalCode = document.getElementById('modal-code');

        const codeSnippets = {
            spread: `
key: 'spread-section',
trigger: 'viewProgress',
effects: [
    {
        key: 'spread-card-0',
        fill: 'both',
        rangeStart: { name: 'contain', offset: { value: 0, type: 'percentage' } },
        rangeEnd: { name: 'contain', offset: { value: 100, type: 'percentage' } },
        keyframeEffect: {
            name: 'stayCenter',
            keyframes: [
                { transform: 'translate(-50%, -50%) scale(1)' },
                { transform: 'translate(-50%, -50%) scale(1.3)' }
            ]
        }
    },
    // ... other cards kept implicitly by leaving config structure similar ...
    {
        key: 'spread-card-1',
        fill: 'both',
        rangeStart: { name: 'contain', offset: { value: 0, type: 'percentage' } },
        rangeEnd: { name: 'contain', offset: { value: 100, type: 'percentage' } },
        keyframeEffect: {
            name: 'spreadLeftInner',
            keyframes: [
                { transform: 'translate(-50%, -50%) scale(1)' },
                { transform: 'translate(calc(-50% - 16vw), -50%) scale(1.15)' }
            ]
        }
    },
    {
        key: 'spread-card-2',
        fill: 'both',
        rangeStart: { name: 'contain', offset: { value: 0, type: 'percentage' } },
        rangeEnd: { name: 'contain', offset: { value: 100, type: 'percentage' } },
        keyframeEffect: {
            name: 'spreadRightInner',
            keyframes: [
                { transform: 'translate(-50%, -50%) scale(1)' },
                { transform: 'translate(calc(-50% + 16vw), -50%) scale(1.15)' }
            ]
        }
    },
    {
        key: 'spread-card-3',
        fill: 'both',
        rangeStart: { name: 'contain', offset: { value: 0, type: 'percentage' } },
        rangeEnd: { name: 'contain', offset: { value: 100, type: 'percentage' } },
        keyframeEffect: {
            name: 'spreadLeftOuter',
            keyframes: [
                { transform: 'translate(-50%, -50%) scale(1)' },
                { transform: 'translate(calc(-50% - 32vw), -50%) scale(0.9)' }
            ]
        }
    },
    {
        key: 'spread-card-4',
        fill: 'both',
        rangeStart: { name: 'contain', offset: { value: 0, type: 'percentage' } },
        rangeEnd: { name: 'contain', offset: { value: 100, type: 'percentage' } },
        keyframeEffect: {
            name: 'spreadRightOuter',
            keyframes: [
                { transform: 'translate(-50%, -50%) scale(1)' },
                { transform: 'translate(calc(-50% + 32vw), -50%) scale(0.9)' }
            ]
        }
    }
]
            `
        };

        function openModal(type) {
            modalCode.textContent = codeSnippets[type];
            modal.classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        function closeModal() {
            modal.classList.remove('active');
            document.body.style.overflow = 'auto';
        }

        modal.addEventListener('click', (e) => {
            if (e.target === modal) closeModal();
        });
    </script>

    <!-- NEW CODE SNIPPET LOGIC -->
    <script>
        // Define specific snippets for each interaction
        const snippets = {
            hover: `trigger: 'hover',
params: { type: 'alternate' },
effects: [{
  keyframeEffect: {
    keyframes: [
      { transform: 'scale(1)', offset: 0 },
      { transform: 'scale(1.02)', offset: 1 }
    ]
  },
  duration: 400,
  easing: 'ease-out',
  fill: 'both',
  composite: 'add'
}]`,
            click: `trigger: 'click',
effects: [
  { 
    selector: '.fill-circle', 
    transition: { 
      duration: 500,
      easing: 'ease-out', 
      styleProperties: [{ name: 'transform', value: 'scale(1)' }] 
    } 
  },
  { 
    key: 'click-ripple-1',
    transition: { 
      duration: 800, 
      easing: 'cubic-bezier(0.175, 0.885, 0.32, 1.275)', 
      styleProperties: [
        { name: 'opacity', value: '1' },
        { name: 'transform', value: 'scale(1.7)' }
      ] 
    } 
  }
]`,
            entrance: `trigger: 'viewEnter',
effects: [{
  fill: 'both', 
  keyframeEffect: {
    name: 'slideFromLeft',
    keyframes: [
      { opacity: 0, transform: 'translate(-120px, -50px)' },
      { opacity: 1, transform: 'translate(0, -50px)' }
    ]
  },
  duration: 1000,
  easing: 'cubic-bezier(0.2, 0.8, 0.2, 1)'
}]`,
            mouseTrack: `trigger: 'pointerMove',
params: { hitArea: 'self' },
effects: [
  {
    key: 'card-target',
    namedEffect: {
      type: 'Tilt3DMouse',
      maxAngle: 25,
      perspective: 600
    }
  },
  {
    key: 'content-target',
    namedEffect: {
      type: 'Tilt3DMouse',
      maxAngle: 60,
      perspective: 300
    }
  }
]`,
            scrollytelling: `
  trigger: 'viewProgress', 
effects: [
// 1. Vertical Spin
{
    key: 'orbit-y',
    fill: 'both',
    // Updated range to cover full entry to exit
    rangeStart: { name: 'entry', offset: { value: 0, type: 'percentage' } },
    rangeEnd: { name: 'exit', offset: { value: 100, type: 'percentage' } },
    keyframeEffect: {
        name: 'rotateY',
        keyframes: [
            { transform: 'rotateY(0deg)' },
            { transform: 'rotateY(360deg)' }
        ]
    },
    composite: 'replace'
},
// 2. Horizontal Spin
{
    key: 'orbit-x',
    fill: 'both',
    rangeStart: { name: 'entry', offset: { value: 0, type: 'percentage' } },
    rangeEnd: { name: 'exit', offset: { value: 100, type: 'percentage' } },
    keyframeEffect: {
        name: 'rotateX',
        keyframes: [
            // Added slight wobble to make rotation visible on flat plane
            { transform: 'rotateX(90deg) rotateZ(0deg)' },
            { transform: 'rotateX(90deg) rotateZ(360deg)' }
        ]
    },
    composite: 'replace'
},
// 3. Diagonal 1 (+45)
{
    key: 'orbit-diag-1',
    fill: 'both',
    rangeStart: { name: 'entry', offset: { value: 0, type: 'percentage' } },
    rangeEnd: { name: 'exit', offset: { value: 100, type: 'percentage' } },
    keyframeEffect: {
        name: 'rotateDiag1',
        keyframes: [
            { transform: 'rotateZ(45deg) rotateY(0deg)' },
            { transform: 'rotateZ(45deg) rotateY(360deg)' }
        ]
    },
    composite: 'replace'
},
// 4. Diagonal 2 (-45)
{
    key: 'orbit-diag-2',
    fill: 'both',
    rangeStart: { name: 'entry', offset: { value: 0, type: 'percentage' } },
    rangeEnd: { name: 'exit', offset: { value: 100, type: 'percentage' } },
    keyframeEffect: {
        name: 'rotateDiag2',
        keyframes: [
            { transform: 'rotateZ(-45deg) rotateY(0deg)' },
            { transform: 'rotateZ(-45deg) rotateY(-360deg)' }
        ]
    },
    composite: 'replace'
}
]           
            `
        };

        document.addEventListener('DOMContentLoaded', () => {
            // 1. Populate code blocks with plain text
            const displays = document.querySelectorAll('.codeDisplay');
            displays.forEach(d => {
                const id = d.getAttribute('data-snippet');
                if (snippets[id]) {
                    d.textContent = snippets[id];
                }
            });

            // 2. Updated Copy Logic: Copies the specific code for the card
            document.querySelectorAll('.copy-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    // Find the sibling code block
                    const container = btn.closest('.group'); // Find parent container
                    const codeElement = container.querySelector('.codeDisplay');
                    
                    if (codeElement) {
                        const codeText = codeElement.textContent;
                        
                        // Create temp element to copy
                        const textArea = document.createElement("textarea");
                        textArea.value = codeText;
                        document.body.appendChild(textArea);
                        textArea.select();
                        try {
                            document.execCommand('copy');
                            const textSpan = btn.querySelector('.copy-text');
                            const originalText = textSpan.innerText;
                            textSpan.innerText = 'COPIED!';
                            setTimeout(() => {
                                textSpan.innerText = originalText;
                            }, 2000);
                        } catch (err) {
                            console.error('Failed to copy', err);
                        }
                        document.body.removeChild(textArea);
                    }
                });
            });
        });
    </script>

    <!-- WIX INTERACT RUNTIME -->
    <script type="module">
        import { Interact } from 'https://esm.sh/@wix/interact@1.90.0';

        // --- GLOBAL MOUSE TRACKER ---
        // Force initialization to center screen
        window.mouseX = window.innerWidth / 2;
        window.mouseY = window.innerHeight / 2;
        
        // Use document-level listener for robust tracking
        document.addEventListener('mousemove', (e) => {
            window.mouseX = e.clientX;
            window.mouseY = e.clientY;
        });

        // --- 1. HERO GRID LOGIC ---
        const gridContainer = document.getElementById('grid-container');
        const lineCache = new Map();
        let centerX, centerY, maxDist;

        function updateGrid() {
            gridContainer.innerHTML = '';
            lineCache.clear();
            const cellSize = 40;
            const containerWidth = gridContainer.offsetWidth || window.innerWidth;
            const containerHeight = gridContainer.offsetHeight || window.innerHeight;
            const cols = Math.ceil(containerWidth / cellSize);
            const rows = Math.ceil(containerHeight / cellSize);
            const neededCells = cols * rows;
            
            gridContainer.style.display = 'grid';
            gridContainer.style.gridTemplateColumns = `repeat(${cols}, 1fr)`;
            gridContainer.style.gridTemplateRows = `repeat(${rows}, 1fr)`;

            const fragment = document.createDocumentFragment();
            for (let i = 0; i < neededCells; i++) {
                const cell = document.createElement('div');
                cell.className = 'grid-cell';
                const line = document.createElement('div');
                line.className = 'grid-line';
                cell.appendChild(line);
                fragment.appendChild(cell);
            }
            gridContainer.appendChild(fragment);

            centerX = window.innerWidth / 2;
            centerY = window.innerHeight / 2;
            maxDist = Math.sqrt(centerX * centerX + centerY * centerY);

            const lines = document.getElementsByClassName('grid-line');
            for (let line of lines) {
                const rect = line.getBoundingClientRect();
                lineCache.set(line, {
                    x: rect.left + rect.width / 2,
                    y: rect.top + rect.height / 2
                });
            }
        }
        updateGrid();
        window.addEventListener('resize', updateGrid);

        const rotateGridEffect = (containerElement, progress) => {
            // IGNORE 'progress' from Interact completely. 
            // Use global window mouse coordinates for absolute reliability.
            const mouseX = window.mouseX;
            const mouseY = window.mouseY;
            
            const screenDiagonal = Math.sqrt(window.innerWidth ** 2 + window.innerHeight ** 2);

            for (const [line, cache] of lineCache) {
                const deltaX = mouseX - cache.x;
                const deltaY = mouseY - cache.y;
                const distFromMouse = Math.sqrt(deltaX * deltaX + deltaY * deltaY);
                const angle = Math.atan2(deltaY, deltaX) * (180 / Math.PI) + 90;
                const distFromCenter = Math.sqrt(Math.pow(cache.x - centerX, 2) + Math.pow(cache.y - centerY, 2));
                const lengthScale = 1 + (distFromCenter / maxDist) * 1.5;

                let moveX = 0;
                let moveY = 0;
                if (distFromMouse > 0) {
                    const influence = Math.max(0, 1 - (distFromMouse / (screenDiagonal * 1.2))); 
                    const pullFactor = influence; 
                    const maxMove = 60; 
                    moveX = (deltaX / distFromMouse) * (maxMove * pullFactor);
                    moveY = (deltaY / distFromMouse) * (maxMove * pullFactor);
                }
                line.style.transform = `translate(${moveX}px, ${moveY}px) rotate(${angle}deg) scaleY(${lengthScale})`;
            }
        };

        // --- 2. TUNNEL EFFECT LOGIC (Manual RAF Loop for Physics) ---
        const NUM_CIRCLES = 45; 
        const tunnelRings = []; 

        let cx = 0; 
        let cy = 0; 
        let tunnelSceneRect = { top: 0, left: 0, width: 0, height: 0 };
        const tunnelSceneContainer = document.getElementById('tunnel-scene-container'); 
        let animationStarted = false; // Flag to ensure initialization runs once

        function updateTunnelBounds() {
            if (tunnelSceneContainer) {
                const rect = tunnelSceneContainer.getBoundingClientRect();
                tunnelSceneRect = rect;
                // Local center relative to the container's coordinates (for the physics)
                cx = rect.width / 2; 
                cy = rect.height / 2;
                
                // Start animation loop only after initial bounds are set
                if (!animationStarted) {
                    animationStarted = true;
                    requestAnimationFrame(animate); 
                }

            } else if (!animationStarted) {
                // If container isn't ready yet, try again in the next frame
                requestAnimationFrame(updateTunnelBounds);
            }
        }
        
        // Initial DOM generation for rings
        const generateTunnel = () => {
            const container = document.getElementById('tunnel-container');
            if (!container) return; // safety check
            container.innerHTML = '';
            tunnelRings.length = 0; // Clear the physics array
            
            for (let i = 0; i < NUM_CIRCLES; i++) {
                const circle = document.createElement('div');
                circle.classList.add('tunnel-circle'); 
                
                // Force absolute centering for the physics calculations
                circle.style.position = 'absolute';
                circle.style.top = '50%';
                circle.style.left = '50%';
                
                // Calculate border color based on depth (i)
                const normalizedDepth = i / NUM_CIRCLES; 
                const alpha = 0.05 + (1 - normalizedDepth) * 0.95; 
                circle.style.borderColor = `rgba(255, 255, 255, ${alpha.toFixed(2)})`;

                // Initial transform
                circle.style.transform = 'translate(-50%, -50%)'; 

                // MODIFIED: Use percentages relative to the container instead of vmin
                // The first circle (i=0) uses CSS rules. Subsequent rings scale down from 100%
                const scale = 100 * Math.pow(0.91, i); 
                circle.style.width = `${scale}%`;
                circle.style.height = `${scale}%`;

                // Z-index ordering
                circle.style.zIndex = NUM_CIRCLES - i; 
                
                container.appendChild(circle);

                // Physics Parameters
                const easeVariance = 0.85 + Math.random() * 0.3;
                
                tunnelRings.push({
                    element: circle,
                    x: 0, 
                    y: 0,
                    // Outer rings move more, inner rings move less (parallax).
                    factor: ((NUM_CIRCLES - i) / NUM_CIRCLES) * 0.03,
                    easeVariance: easeVariance
                });
            }
        };

        // Call DOM generation early
        generateTunnel(); 

        // 4. ANIMATION LOOP (Runs constantly for physics)
        // Global movement reduction factor
        const MOVEMENT_FACTOR = 0.5; // Changed from 1.0 to 0.5 to reduce movement by half

        const animate = () => {
            
            // Recalculate bounds in case of scroll or position change (more robust)
            updateTunnelBounds();

            // 1. Localized mouse position relative to container
            const localMouseX = window.mouseX - tunnelSceneRect.left;
            const localMouseY = window.mouseY - tunnelSceneRect.top;

            // 2. Calculate distance of mouse from container center (cx, cy are now container center)
            const targetX = localMouseX - cx;
            const targetY = localMouseY - cy;
            
            const dist = Math.sqrt(targetX * targetX + targetY * targetY);
            // Use local container dimensions for maxDist
            const maxDist = Math.max(cx, cy) || 1;
            
            const normalizedDist = dist / maxDist;
            // "Stretch" logic: Pulls the tunnel apart more when mouse is at edges
            // FIX: Reduced max stretch factor by half (from 4.0 to 2.0)
            const stretch = 1 + Math.pow(normalizedDist, 1.2) * 2.0; 

            tunnelRings.forEach((ring, index) => {
                const targetMoveX = targetX * ring.factor * stretch;
                const targetMoveY = targetY * ring.factor * stretch; // Corrected to use factor for Y movement too

                // Base easing gets slightly stiffer for smaller rings
                let baseEase = 0.08 + (0.02 * (1 - index / NUM_CIRCLES));
                // Apply organic variance (uses the unique easeVariance calculated in generateTunnel)
                const finalEase = baseEase * ring.easeVariance;

                // Linear Interpolation (Lerp) for smooth lag
                ring.x += (targetMoveX - ring.x) * finalEase;
                ring.y += (targetMoveY - ring.y) * finalEase;

                // Apply transform: Center (-50%) + Physics Offset (x, y)
                ring.element.style.transform = `translate(-50%, -50%) translate3d(${ring.x}px, ${ring.y}px, 0)`;
            });

            requestAnimationFrame(animate);
        };
        
        // Start the process: calculate bounds first, which then calls animate()
        updateTunnelBounds();

        // The Interact Hook (Just acts as a dummy to keep config valid, logic handled by loop)
        const animateTunnel = (rootElement, progress) => {
             // Logic moved to animation loop using global mouse coordinates
        };

        // --- 2.1 MOUSE TRACK PRIMITIVE GENERATION ---
        const generateMouseTunnel = () => {
            const mount = document.getElementById('mt-tunnel-mount');
            if (!mount) return;
            const DEPTH = 12;
            let currentParent = mount;

            for (let i = 0; i < DEPTH; i++) {
                const circle = document.createElement('div');
                
                if (i === 0) {
                    circle.classList.add('ring-base', 'tunnel-static');
                    mount.appendChild(circle);
                    
                    const moverRoot = document.createElement('div');
                    moverRoot.classList.add('ring-base');
                    moverRoot.style.border = 'none';
                    moverRoot.style.width = '100%';
                    moverRoot.style.height = '100%';
                    
                    mount.appendChild(moverRoot);
                    currentParent = moverRoot;
                } else {
                    circle.classList.add('tunnel-moving', 'ring-base');
                    circle.style.position = 'relative'; 
                    currentParent.appendChild(circle);
                    currentParent = circle;
                }
            }
        };
        generateMouseTunnel();

        // --- 3. REUSABLE ANIMATION CONFIGS ---
        const FADE_UP_OPTS = { type: 'FadeIn', direction: 'bottom', distance: '60px', power: 'soft' };
        
        // Custom elastic easing for a "pop" feel
        const CLICK_EASING = 'cubic-bezier(0.175, 0.885, 0.32, 1.275)'; 

        // Entrance Configs
        const ENTRANCE_DURATION = 1000;
        const ENTRANCE_EASING = 'cubic-bezier(0.2, 0.8, 0.2, 1)';
        const ENTRANCE_OFFSET = '50px'; 
        const ENTRANCE_SLIDE_DIST = '120px';

        const HOVER_SCALE = {
            name: 'hoverScale',
            keyframes: [
                { transform: 'scale(1)', offset: 0 },
                { transform: 'scale(1.02)', offset: 1 }
            ]
        };

        const TILT_UP_OPTS = {
            name: 'tiltUp',
            keyframes: [
                { opacity: 0, transform: 'translateY(80px) rotateX(60deg) scale(0.9)', transformOrigin: 'center top' },
                { opacity: 1, transform: 'translateY(0) rotateX(0deg) scale(1)', transformOrigin: 'center top' }
            ]
        };

        // --- PRIMITIVE INTERACTIONS ---
        // Only Hover is auto-generated now. Click and Entrance are manual.
        const primitivePrefixes = ['hover'];
        const generateCircleInteractions = (prefix) => {
            return [
                {
                    key: `${prefix}-circle-1`, trigger: 'hover',
                    effects: [
                        { transition: { duration: 400, easing: 'ease-out', styleProperties: [{ name: 'transform', value: 'scale(1.1)' }] } },
                        { selector: '.fill-circle', transition: { duration: 400, easing: 'ease-out', styleProperties: [{ name: 'transform', value: 'scale(1)' }] } },
                        { key: `${prefix}-circle-2`, transition: { duration: 400, easing: 'ease-out', styleProperties: [{ name: 'transform', value: 'translate(20px, -20px)' }] } },
                        { key: `${prefix}-circle-3`, transition: { duration: 400, easing: 'ease-out', styleProperties: [{ name: 'transform', value: 'translate(20px, -20px)' }] } }
                    ]
                },
                {
                    key: `${prefix}-circle-2`, trigger: 'hover',
                    effects: [
                        { transition: { duration: 400, easing: 'ease-out', styleProperties: [{ name: 'transform', value: 'scale(1.1)' }] } },
                        { selector: '.fill-circle', transition: { duration: 400, easing: 'ease-out', styleProperties: [{ name: 'transform', value: 'scale(1)' }] } },
                        { key: `${prefix}-circle-1`, transition: { duration: 400, easing: 'ease-out', styleProperties: [{ name: 'transform', value: 'translate(-20px, 20px)' }] } },
                        { key: `${prefix}-circle-3`, transition: { duration: 400, easing: 'ease-out', styleProperties: [{ name: 'transform', value: 'translate(20px, -20px)' }] } }
                    ]
                },
                {
                    key: `${prefix}-circle-3`, trigger: 'hover',
                    effects: [
                        { transition: { duration: 400, easing: 'ease-out', styleProperties: [{ name: 'transform', value: 'scale(1.1)' }] } },
                        { selector: '.fill-circle', transition: { duration: 400, easing: 'ease-out', styleProperties: [{ name: 'transform', value: 'scale(1)' }] } },
                        { key: `${prefix}-circle-1`, transition: { duration: 400, easing: 'ease-out', styleProperties: [{ name: 'transform', value: 'translate(-20px, 20px)' }] } },
                        { key: `${prefix}-circle-2`, transition: { duration: 400, easing: 'ease-out', styleProperties: [{ name: 'transform', value: 'translate(-20px, 20px)' }] } }
                    ]
                }
            ];
        };
        const primitiveInteractions = primitivePrefixes.flatMap(prefix => generateCircleInteractions(prefix));
        
        // Register CSS Variable to ensure smooth interpolation by the engine
        if (window.CSS && CSS.registerProperty) {
            try {
                CSS.registerProperty({
                    name: '--spacing',
                    syntax: '<length>',
                    inherits: true,
                    initialValue: '0px',
                });
            } catch (err) {}
        }

        // --- Geometry Generation (Optimized) ---
        const spongeContainer = document.getElementById('sponge');
        const HS = 30; // Half size
       
        const fragment = document.createDocumentFragment();

        function shouldExist(x, y, z) {
            return [x, y, z].filter((c) => c === 0).length < 2;
        }

        const transformTemplates = [
            `rotateY(0deg) translateZ(${HS}px)`,
            `rotateY(180deg) translateZ(${HS}px)`,
            `rotateY(90deg) translateZ(${HS}px)`,
            `rotateY(-90deg) translateZ(${HS}px)`,
            `rotateX(90deg) translateZ(${HS}px)`,
            `rotateX(-90deg) translateZ(${HS}px)`,
        ];

        for (let x = -1; x <= 1; x++) {
            for (let y = -1; y <= 1; y++) {
                for (let z = -1; z <= 1; z++) {
                    if (shouldExist(x, y, z)) {
                        const voxel = document.createElement('div');
                        voxel.className = 'voxel';
                        voxel.style.setProperty('--x', x);
                        voxel.style.setProperty('--y', y);
                        voxel.style.setProperty('--z', z);

                        for (let i = 0; i < transformTemplates.length; i++) {
                            const face = document.createElement('div');
                            face.className = 'cube-face';
                            face.style.transform = transformTemplates[i];
                            voxel.appendChild(face);
                        }
                       
                        fragment.appendChild(voxel);
                    }
                }
            }
        }
       
        if (spongeContainer) {
            spongeContainer.appendChild(fragment);
        }
        
       

        // --- INTERACT CONFIG ---
        const config = {
        effects: {
                spongeTumble: {
                    key: 'sponge',
                    duration: 20000,
                    iterations: Infinity,
                    easing: 'linear',
                    fill: 'both',
                    composite: 'replace',
                    keyframeEffect: {
                        keyframes: [
                            { transform: 'rotate3d(1, 1, 1, 0deg)' },
                            { transform: 'rotate3d(1, 1, 1, 360deg)' }
                        ],
                    },
                },

                spongeExplode: {
                    key: 'sponge',
                    duration: 1400,
                    easing: 'cubic-bezier(0.19, 1, 0.22, 1)',
                    fill: 'both',
                    composite: 'replace',
                    keyframeEffect: {
                        keyframes: [
                            { '--spacing': '0px' },
                            { '--spacing': '100px' }
                        ],
                    },
                },
            },

            interactions: [
             // Text Entrance
                {
                    key: 'perf-text',
                    trigger: 'viewEnter',
                    effects: [{ keyframeEffect: { ...TILT_UP_OPTS }, duration: 1000, easing: 'cubic-bezier(0.2, 0.8, 0.2, 1)', fill: 'both' }]
                },
                  {
                    key: 'perf-text-2',
                    trigger: 'viewEnter',
                    effects: [{ keyframeEffect: { ...TILT_UP_OPTS }, duration: 1000, easing: 'cubic-bezier(0.2, 0.8, 0.2, 1)', fill: 'both' }]
                },
                // Sponge Tumble (Continuous)
                {
                    key: 'sponge',
                    trigger: 'pageVisible',
                    effects: [
                        { effectId: 'spongeTumble' },
                    ],
                },
                // Sponge Explode (Hover)
                {
                    key: 'hitbox',
                    trigger: 'hover',
                    params: {
                        type: 'alternate',
                    },
                    effects: [
                        { effectId: 'spongeExplode' },
                    ],
                },
                // --- NEW HERO GRID INTERACTION ---
                {
                    key: 'hero-grid',
                    trigger: 'pointerMove',
                    params: { hitArea: 'root' },
                    effects: [{ customEffect: rotateGridEffect }]
                },
                // Hero Text
                {
                    key: 'hero-line-1',
                    trigger: 'viewEnter',
                    effects: [{ keyframeEffect: { ...TILT_UP_OPTS }, duration: 900, easing: 'cubic-bezier(0.2, 0.8, 0.2, 1)', delay: 100, fill: 'both' }]
                },
                {
                    key: 'hero-line-2',
                    trigger: 'viewEnter',
                    effects: [{ keyframeEffect: { ...TILT_UP_OPTS }, duration: 900, easing: 'cubic-bezier(0.2, 0.8, 0.2, 1)', delay: 250, fill: 'both' }]
                },
                {
                    key: 'hero-subtitle',
                    trigger: 'viewEnter',
                    effects: [{ namedEffect: { ...FADE_UP_OPTS, distance: '30px' }, duration: 1200, easing: 'ease-out', delay: 600, fill: 'both' }]
                },
                {
                    key: 'nav-logo',
                    trigger: 'viewEnter',
                    effects: [{ namedEffect: { type: 'FadeIn' }, duration: 1000, fill: 'both' }]
                },
                {
                    key: 'nav-cta',
                    trigger: 'viewEnter',
                    effects: [{ namedEffect: { type: 'FadeIn' }, duration: 1000, delay: 200, fill: 'both' }]
                },

                // --- REST OF THE PAGE INTERACTIONS ---
                ...primitiveInteractions,
                
                // NEW ENTRANCE INTERACTION (Swirling Plus)
                // 1. Top Circle: Slides in from Left
                {
                    key: 'circle-top',
                    trigger: 'viewEnter',
                    effects: [{
                        fill: 'both', 
                        keyframeEffect: {
                            name: 'slideFromLeftToTop',
                            keyframes: [
                                { opacity: 0, transform: `translate(-${ENTRANCE_SLIDE_DIST}, -${ENTRANCE_OFFSET})` }, // Start: Left of target
                                { opacity: 1, transform: `translate(0, -${ENTRANCE_OFFSET})` }        // End: Top position
                            ]
                        },
                        duration: ENTRANCE_DURATION,
                        easing: ENTRANCE_EASING,
                        delay: 0
                    }]
                },
                // 2. Right Circle: Slides in from Top
                {
                    key: 'circle-right',
                    trigger: 'viewEnter',
                    effects: [{
                        fill: 'both',
                        keyframeEffect: {
                            name: 'slideFromTopToRight',
                            keyframes: [
                                { opacity: 0, transform: `translate(${ENTRANCE_OFFSET}, -${ENTRANCE_SLIDE_DIST})` }, // Start: Top of target
                                { opacity: 1, transform: `translate(${ENTRANCE_OFFSET}, 0)` }        // End: Right position
                            ]
                        },
                        duration: ENTRANCE_DURATION,
                        easing: ENTRANCE_EASING,
                        delay: 100
                    }]
                },
                // 3. Bottom Circle: Slides in from Right
                {
                    key: 'circle-bottom',
                    trigger: 'viewEnter',
                    effects: [{
                        fill: 'both',
                        keyframeEffect: {
                            name: 'slideFromRightToBottom',
                            keyframes: [
                                { opacity: 0, transform: `translate(${ENTRANCE_SLIDE_DIST}, ${ENTRANCE_OFFSET})` }, // Start: Right of target
                                { opacity: 1, transform: `translate(0, ${ENTRANCE_OFFSET})` }        // End: Bottom position
                            ]
                        },
                        duration: ENTRANCE_DURATION,
                        easing: ENTRANCE_EASING,
                        delay: 200
                    }]
                },
                // 4. Left Circle: Slides in from Bottom
                {
                    key: 'circle-left',
                    trigger: 'viewEnter',
                    effects: [{
                        fill: 'both',
                        keyframeEffect: {
                            name: 'slideFromBottomToLeft',
                            keyframes: [
                                { opacity: 0, transform: `translate(-${ENTRANCE_OFFSET}, ${ENTRANCE_SLIDE_DIST})` }, // Start: Bottom of target
                                { opacity: 1, transform: `translate(-${ENTRANCE_OFFSET}, 0)` }        // End: Left position
                            ]
                        },
                        duration: ENTRANCE_DURATION,
                        easing: ENTRANCE_EASING,
                        delay: 300
                    }]
                },

                // NEW CLICK INTERACTION (Ripple Effect)
                {
                    key: 'click-center',
                    trigger: 'click',
                    // 'toggle' is default for state interactions
                    effects: [
                        // 1. Fill the center circle
                        { 
                            selector: '.fill-circle', 
                            transition: { 
                                duration: 500,
                                easing: 'ease-out', 
                                styleProperties: [{ name: 'transform', value: 'scale(1)' }] 
                            } 
                        },
                        // 2. Expand Ripple 1
                        { 
                            key: 'click-ripple-1',
                            transition: { 
                                duration: 800, 
                                easing: CLICK_EASING, 
                                styleProperties: [
                                    { name: 'opacity', value: '1' },
                                    { name: 'transform', value: 'scale(1.7)' }
                                ] 
                            } 
                        },
                        // 3. Expand Ripple 2 (Larger, Delayed)
                        { 
                            key: 'click-ripple-2',
                            transition: { 
                                duration: 800, 
                                easing: CLICK_EASING, 
                                delay: 50, 
                                styleProperties: [
                                    { name: 'opacity', value: '0.5' }, 
                                    { name: 'transform', value: 'scale(2.6)' }
                                ] 
                            } 
                        }
                    ]
                },


                // NEW MOUSE TRACK INTERACTION (3D Tilt Tunnel)
                {
                    key: 'mt-scene-root',
                    trigger: 'pointerMove',
                    params: { hitArea: 'self'}, // 'self' keeps the effect contained to the card
                    effects: [
                        // Effect 1: Tilt the Card Frame
                        {
                            key: 'mt-card-target',
                            namedEffect: {
                                type: 'Tilt3DMouse',
                                maxAngle: 25, // Subtle tilt for the container
                                perspective: 200
                            },
                            fill: 'both',
                            composite: 'replace'
                        },
                        // Effect 2: Tilt the Inner Circles (Intense)
                        {
                            key: 'mt-content-target',
                            namedEffect: {
                                type: 'Tilt3DMouse',
                                maxAngle: 60, // Deep tilt for the tunnel
                                perspective: 100
                            },
                            fill: 'both',
                            composite: 'replace'
                        }
                    ]
                },

                // NEW SCROLLYTELLING INTERACTION (Atom Spin)
                {
                    key: 'scrolly-atom-card',
                    trigger: 'viewProgress', 
                    effects: [
                        // 1. Vertical Spin
                        {
                            key: 'orbit-y',
                            fill: 'both',
                            // Updated range to cover full entry to exit
                            rangeStart: { name: 'entry', offset: { value: 0, type: 'percentage' } },
                            rangeEnd: { name: 'exit', offset: { value: 100, type: 'percentage' } },
                            keyframeEffect: {
                                name: 'rotateY',
                                keyframes: [
                                    { transform: 'rotateY(0deg)' },
                                    { transform: 'rotateY(360deg)' }
                                ]
                            },
                            composite: 'replace'
                        },
                        // 2. Horizontal Spin
                        {
                            key: 'orbit-x',
                            fill: 'both',
                            rangeStart: { name: 'entry', offset: { value: 0, type: 'percentage' } },
                            rangeEnd: { name: 'exit', offset: { value: 100, type: 'percentage' } },
                            keyframeEffect: {
                                name: 'rotateX',
                                keyframes: [
                                    // Added slight wobble to make rotation visible on flat plane
                                    { transform: 'rotateX(90deg) rotateZ(0deg)' },
                                    { transform: 'rotateX(90deg) rotateZ(360deg)' }
                                ]
                            },
                            composite: 'replace'
                        },
                        // 3. Diagonal 1 (+45)
                        {
                            key: 'orbit-diag-1',
                            fill: 'both',
                            rangeStart: { name: 'entry', offset: { value: 0, type: 'percentage' } },
                            rangeEnd: { name: 'exit', offset: { value: 100, type: 'percentage' } },
                            keyframeEffect: {
                                name: 'rotateDiag1',
                                keyframes: [
                                    { transform: 'rotateZ(45deg) rotateY(0deg)' },
                                    { transform: 'rotateZ(45deg) rotateY(360deg)' }
                                ]
                            },
                            composite: 'replace'
                        },
                        // 4. Diagonal 2 (-45)
                        {
                            key: 'orbit-diag-2',
                            fill: 'both',
                            rangeStart: { name: 'entry', offset: { value: 0, type: 'percentage' } },
                            rangeEnd: { name: 'exit', offset: { value: 100, type: 'percentage' } },
                            keyframeEffect: {
                                name: 'rotateDiag2',
                                keyframes: [
                                    { transform: 'rotateZ(-45deg) rotateY(0deg)' },
                                    { transform: 'rotateZ(-45deg) rotateY(-360deg)' }
                                ]
                            },
                            composite: 'replace'
                        }
                    ]
                },

                // Mission Text
                {
                    key: 'mission-text',
                    trigger: 'viewEnter',
                    effects: [{
                        namedEffect: {
                            type: 'SlideIn',
                            direction: 'bottom',
                            distance: '100px',
                            power: 'soft'
                        },
                        duration: 1000,
                        easing: 'ease-out',
                        fill: 'both'
                    }]
                },

                // Visual Break / Parallax
                {
                    key: 'visual-break',
                    trigger: 'viewEnter',
                    threshold: 0.2,
                    effects: [{
                        namedEffect: { type: 'ScaleIn', power: 'soft' },
                        duration: 1200,
                        fill: 'both'
                    }]
                },
                {
                    key: 'visual-break',
                    trigger: 'viewProgress',
                    effects: [{
                        namedEffect: { type: 'ParallaxScroll', range: 'continuous', speed: -0.05 },
                        rangeStart: { name: 'entry', offset: { value: 0, type: 'percentage' } },
                        rangeEnd: { name: 'exit', offset: { value: 0, type: 'percentage' } },
                        fill: 'both',
                        composite: 'add'
                    }]
                },

                // --- CHANGED: NEW BEAUTIFUL SECTION SCROLL EFFECTS ---
                {
                    key: 'beautiful-section',
                    trigger: 'viewProgress',
                    effects: [
                        // 1. Pyramid Rotation
                        {
                            key: 'pyramid-target',
                            fill: 'both',
                            rangeStart: { name: 'cover', offset: { value: 0, type: 'percentage' } },
                            rangeEnd: { name: 'cover', offset: { value: 100, type: 'percentage' } },
                            keyframeEffect: {
                                name: 'pyramid-tumble',
                                keyframes: [
                                    { transform: 'rotateX(0deg) rotateY(0deg) rotateZ(0deg)' },
                                    { transform: 'rotateX(720deg) rotateY(540deg) rotateZ(120deg)' } 
                                ]
                            }
                        },
                        
                        // 2. SCROLL DRIVEN TEXT ANIMATIONS
                        // Step 1: "Beautiful" (0% - 15%)
                        {
                            key: 'word-1',
                            keyframeEffect: {
                                keyframes: [
                                    { opacity: 0, transform: 'translateY(150px)' },
                                    { opacity: 1, transform: 'translateY(0)' }
                                ]
                            },
                            rangeStart: { name: 'cover', offset: { value: 5, type: 'percentage' } },
                            rangeEnd: { name: 'cover', offset: { value: 15, type: 'percentage' } },
                            fill: 'both'
                        },
                        
                        // Step 2: "Effects," (5% - 20%)
                        {
                            key: 'word-2',
                            keyframeEffect: {
                                keyframes: [
                                    { opacity: 0, transform: 'translateY(150px)' },
                                    { opacity: 1, transform: 'translateY(0)' }
                                ]
                            },
                            rangeStart: { name: 'cover', offset: { value: 5, type: 'percentage' } },
                            rangeEnd: { name: 'cover', offset: { value: 20, type: 'percentage' } },
                            fill: 'both'
                        },
                        
                        // Step 3: "Ready to Use." (Grouped: 15% - 30%)
                        {
                            key: 'word-3',
                            keyframeEffect: {
                                keyframes: [
                                    { opacity: 0, transform: 'translateY(150px)' },
                                    { opacity: 1, transform: 'translateY(0)' }
                                ]
                            },
                            rangeStart: { name: 'cover', offset: { value: 15, type: 'percentage' } },
                            rangeEnd: { name: 'cover', offset: { value: 30, type: 'percentage' } },
                            fill: 'both'
                        },
                        
                        {
                            key: 'word-4',
                            keyframeEffect: {
                                keyframes: [
                                    { opacity: 0, transform: 'translateY(150px)' },
                                    { opacity: 1, transform: 'translateY(0)' }
                                ]
                            },
                            rangeStart: { name: 'cover', offset: { value: 15, type: 'percentage' } },
                            rangeEnd: { name: 'cover', offset: { value: 30, type: 'percentage' } },
                            fill: 'both'
                        },
                        {
                            key: 'word-5',
                            keyframeEffect: {
                                keyframes: [
                                    { opacity: 0, transform: 'translateY(150px)' },
                                    { opacity: 1, transform: 'translateY(0)' }
                                ]
                            },
                            rangeStart: { name: 'cover', offset: { value: 15, type: 'percentage' } },
                            rangeEnd: { name: 'cover', offset: { value: 30, type: 'percentage' } },
                            fill: 'both'
                        },
                        
                        // Step 4: Description (30% - 45%)
                        {
                            key: 'desc-text',
                            keyframeEffect: {
                                keyframes: [
                                    { opacity: 0, transform: 'translateY(50px)' },
                                    { opacity: 1, transform: 'translateY(0)' }
                                ]
                            },
                            rangeStart: { name: 'cover', offset: { value: 30, type: 'percentage' } },
                            rangeEnd: { name: 'cover', offset: { value: 45, type: 'percentage' } },
                            fill: 'both'
                        }
                    ]
                },

                // --- CHANGED: NEW TUNNEL INTERACTION ---
                {
                    key: 'tunnel-root',
                    trigger: 'pointerMove',
                    params: { hitArea: 'root' },
                    effects: [
                        {
                            customEffect: animateTunnel,
                            fill: 'both',
                            composite: 'replace'
                        }
                    ]
                },

                // Cards Hover (using the generated primitive)
                {
                    key: 'hover-target',
                    trigger: 'hover',
                    params: { type: 'alternate' },
                    effects: [{
                        keyframeEffect: { ...HOVER_SCALE },
                        duration: 400,
                        easing: 'ease-out',
                        fill: 'both',
                        composite: 'add'
                    }]
                },

                // NEW TAILORED SECTION ANIMATIONS
                {
                    key: 'tailored-header',
                    trigger: 'viewEnter',
                    effects: [{ namedEffect: { type: 'FadeIn', distance: '40px', direction: 'bottom' }, duration: 800, fill: 'both' }]
                },
                {
                    key: 'tailored-col-1',
                    trigger: 'viewEnter',
                    effects: [{ namedEffect: { type: 'FadeIn', distance: '40px', direction: 'bottom' }, duration: 800, delay: 100, fill: 'both' }]
                },
                {
                    key: 'tailored-col-2',
                    trigger: 'viewEnter',
                    effects: [{ namedEffect: { type: 'FadeIn', distance: '40px', direction: 'bottom' }, duration: 800, delay: 200, fill: 'both' }]
                },
                {
                    key: 'tailored-col-3',
                    trigger: 'viewEnter',
                    effects: [{ namedEffect: { type: 'FadeIn', distance: '40px', direction: 'bottom' }, duration: 800, delay: 300, fill: 'both' }]
                },
                
                // Spread Section
                {
                    key: 'spread-section',
                    trigger: 'viewProgress',
                    effects: [
                        {
                            key: 'spread-card-0',
                            fill: 'both',
                            rangeStart: { name: 'contain', offset: { value: 0, type: 'percentage' } },
                            rangeEnd: { name: 'contain', offset: { value: 100, type: 'percentage' } },
                            keyframeEffect: {
                                name: 'stayCenter',
                                keyframes: [
                                    { transform: 'translate(-50%, -50%) scale(1)' },
                                    { transform: 'translate(-50%, -50%) scale(1.3)' }
                                ]
                            }
                        },
                        // ... other cards kept implicitly by leaving config structure similar ...
                        {
                            key: 'spread-card-1',
                            fill: 'both',
                            rangeStart: { name: 'contain', offset: { value: 0, type: 'percentage' } },
                            rangeEnd: { name: 'contain', offset: { value: 100, type: 'percentage' } },
                            keyframeEffect: {
                                name: 'spreadLeftInner',
                                keyframes: [
                                    { transform: 'translate(-50%, -50%) scale(1)' },
                                    { transform: 'translate(calc(-50% - 16vw), -50%) scale(1.15)' }
                                ]
                            }
                        },
                        {
                            key: 'spread-card-2',
                            fill: 'both',
                            rangeStart: { name: 'contain', offset: { value: 0, type: 'percentage' } },
                            rangeEnd: { name: 'contain', offset: { value: 100, type: 'percentage' } },
                            keyframeEffect: {
                                name: 'spreadRightInner',
                                keyframes: [
                                    { transform: 'translate(-50%, -50%) scale(1)' },
                                    { transform: 'translate(calc(-50% + 16vw), -50%) scale(1.15)' }
                                ]
                            }
                        },
                        {
                            key: 'spread-card-3',
                            fill: 'both',
                            rangeStart: { name: 'contain', offset: { value: 0, type: 'percentage' } },
                            rangeEnd: { name: 'contain', offset: { value: 100, type: 'percentage' } },
                            keyframeEffect: {
                                name: 'spreadLeftOuter',
                                keyframes: [
                                    { transform: 'translate(-50%, -50%) scale(1)' },
                                    { transform: 'translate(calc(-50% - 32vw), -50%) scale(0.9)' }
                                ]
                            }
                        },
                        {
                            key: 'spread-card-4',
                            fill: 'both',
                            rangeStart: { name: 'contain', offset: { value: 0, type: 'percentage' } },
                            rangeEnd: { name: 'contain', offset: { value: 100, type: 'percentage' } },
                            keyframeEffect: {
                                name: 'spreadRightOuter',
                                keyframes: [
                                    { transform: 'translate(-50%, -50%) scale(1)' },
                                    { transform: 'translate(calc(-50% + 32vw), -50%) scale(0.9)' }
                                ]
                            }
                        }
                    ]
                },

                // Horizontal Scroll
                {
                    key: 'h-section',
                    trigger: 'viewProgress',
                    effects: [{
                        key: 'h-track',
                        fill: 'both',
                        rangeStart: { name: 'contain', offset: { value: 0, type: 'percentage' } },
                        rangeEnd: { name: 'contain', offset: { value: 100, type: 'percentage' } },
                        keyframeEffect: {
                            name: 'moveLeft',
                            keyframes: [
                                { transform: 'translateX(0)' },
                                { transform: 'translateX(-5824px)' } 
                            ]
                        }
                    },
                    {
                        key: 'h-card-1',
                        fill: 'both',
                        rangeStart: { name: 'contain', offset: { value: 0, type: 'percentage' } },
                        rangeEnd: { name: 'contain', offset: { value: 12.5, type: 'percentage' } },
                        keyframeEffect: {
                            name: 'scaleCenter1',
                            keyframes: [{ transform: 'scale(1.3)' }, { transform: 'scale(1)' }]
                        }
                    },
                    {
                        key: 'h-card-2',
                        fill: 'both',
                        rangeStart: { name: 'contain', offset: { value: 0, type: 'percentage' } },
                        rangeEnd: { name: 'contain', offset: { value: 25, type: 'percentage' } },
                        keyframeEffect: { name: 'scaleCenter2', keyframes: [{ transform: 'scale(1)' }, { transform: 'scale(1.3)', offset: 0.5 }, { transform: 'scale(1)' }] }
                    },
                    {
                        key: 'h-card-3',
                        fill: 'both',
                        rangeStart: { name: 'contain', offset: { value: 12.5, type: 'percentage' } },
                        rangeEnd: { name: 'contain', offset: { value: 37.5, type: 'percentage' } },
                        keyframeEffect: { name: 'scaleCenter3', keyframes: [{ transform: 'scale(1)' }, { transform: 'scale(1.3)', offset: 0.5 }, { transform: 'scale(1)' }] }
                    },
                    {
                        key: 'h-card-4',
                        fill: 'both',
                        rangeStart: { name: 'contain', offset: { value: 25, type: 'percentage' } },
                        rangeEnd: { name: 'contain', offset: { value: 50, type: 'percentage' } },
                        keyframeEffect: { name: 'scaleCenter4', keyframes: [{ transform: 'scale(1)' }, { transform: 'scale(1.3)', offset: 0.5 }, { transform: 'scale(1)' }] }
                    },
                    {
                        key: 'h-card-5',
                        fill: 'both',
                        rangeStart: { name: 'contain', offset: { value: 37.5, type: 'percentage' } },
                        rangeEnd: { name: 'contain', offset: { value: 62.5, type: 'percentage' } },
                        keyframeEffect: { name: 'scaleCenter5', keyframes: [{ transform: 'scale(1)' }, { transform: 'scale(1.3)', offset: 0.5 }, { transform: 'scale(1)' }] }
                    },
                    {
                        key: 'h-card-6',
                        fill: 'both',
                        rangeStart: { name: 'contain', offset: { value: 50, type: 'percentage' } },
                        rangeEnd: { name: 'contain', offset: { value: 75, type: 'percentage' } },
                        keyframeEffect: { name: 'scaleCenter6', keyframes: [{ transform: 'scale(1)' }, { transform: 'scale(1.3)', offset: 0.5 }, { transform: 'scale(1)' }] }
                    },
                    {
                        key: 'h-card-7',
                        fill: 'both',
                        rangeStart: { name: 'contain', offset: { value: 62.5, type: 'percentage' } },
                        rangeEnd: { name: 'contain', offset: { value: 87.5, type: 'percentage' } },
                        keyframeEffect: { name: 'scaleCenter7', keyframes: [{ transform: 'scale(1)' }, { transform: 'scale(1.3)', offset: 0.5 }, { transform: 'scale(1)' }] }
                    },
                    {
                        key: 'h-card-8',
                        fill: 'both',
                        rangeStart: { name: 'contain', offset: { value: 75, type: 'percentage' } },
                        rangeEnd: { name: 'contain', offset: { value: 100, type: 'percentage' } },
                        keyframeEffect: { name: 'scaleCenter8', keyframes: [{ transform: 'scale(1)' }, { transform: 'scale(1.3)', offset: 0.5 }, { transform: 'scale(1)' }] }
                    },
                    {
                        key: 'h-card-9',
                        fill: 'both',
                        rangeStart: { name: 'contain', offset: { value: 87.5, type: 'percentage' } },
                        rangeEnd: { name: 'contain', offset: { value: 100, type: 'percentage' } },
                        keyframeEffect: { name: 'scaleCenter9', keyframes: [{ transform: 'scale(1)' }, { transform: 'scale(1.3)' }] }
                    }]
                },

                // Footer
                {
                    key: 'footer-brand',
                    trigger: 'viewEnter',
                    effects: [{ namedEffect: { type: 'FadeIn' }, duration: 600, fill: 'both' }]
                },
                {
                    key: 'footer-link',
                    trigger: 'viewEnter',
                    effects: [{ namedEffect: { type: 'FadeIn' }, duration: 600, delay: 100, fill: 'both' }]
                }
            ]
        };
        // Respect reduced motion settings (disable all animations)
        Interact.forceReducedMotion = matchMedia('(prefers-reduced-motion: reduce)').matches;
        // Initialize Interact
        Interact.create(config);
    </script>
</body>
</html>
